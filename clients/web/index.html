<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🏓 Pong Web Client</title>
  <link rel="stylesheet" href="/src/styles/main.css" />
  <link rel="stylesheet" href="/src/styles/peer_id.css" />
  <link rel="stylesheet" href="/src/styles/peer_qr.css" />
</head>
<body>
  <div id="app">
    <!-- Mode Selection Screen -->
    <div id="mode-select-screen" class="screen">
      <div id="title-section" class="terminal-section title">
        🏓 Pong Web Client 🏓
      </div>
      
      <div class="terminal-section mode-selection">
        <div class="mode-title">Select Game Mode:</div>
        
        <div class="mode-buttons">
          <button id="btn-host" class="mode-button">
            <div class="mode-icon">🌐</div>
            <div class="mode-name">HOST</div>
            <div class="mode-desc">Host a networked game</div>
          </button>
          
          <button id="btn-join" class="mode-button">
            <div class="mode-icon">🔗</div>
            <div class="mode-name">JOIN</div>
            <div class="mode-desc">Join a networked game</div>
          </button>
          
          <button id="btn-vs-local2" class="mode-button">
            <div class="mode-icon">👥</div>
            <div class="mode-name">VS LOCAL 2P</div>
            <div class="mode-desc">Two players, same device</div>
          </button>
          
          <button id="btn-vs-ai" class="mode-button">
            <div class="mode-icon">🤖</div>
            <div class="mode-name">VS AI</div>
            <div class="mode-desc">Play against computer</div>
          </button>
          
          <button id="btn-vs-wall" class="mode-button">
            <div class="mode-icon">🧱</div>
            <div class="mode-name">VS WALL</div>
            <div class="mode-desc">Solo practice mode</div>
          </button>
        </div>
      </div>
      
      <div class="terminal-section controls">
        Select a mode to start playing  •  
        <button id="fullscreen-btn" class="fullscreen-button">⛶ Fullscreen</button>
      </div>
    </div>

    <!-- Host Screen -->
    <div id="host-screen" class="screen" style="display: none;">
      <div id="title-section" class="terminal-section title">
        🌐 Host Game 🌐
      </div>
      
      <div class="terminal-section host-content">
        <div class="peer-id-section" id="host-peer-id-section">
          <label for="host-peer-id-output" class="peer-id-label">Your Game ID:</label>
          <input id="host-peer-id-output" class="peer-id-input" readonly placeholder="Generating Game ID..."/>
          <button id="copy-peer-id-btn" class="copy-button">📋 Copy</button>
          <div id="host-connection-string" class="connection-string"></div>
        </div>
        
        <div class="connection-status">
          <div id="host-status" class="status-text">Initializing...</div>
          <div class="instruction-text">Share this Game ID with your friend to let them join!</div>
        </div>
        
        <div class="host-buttons">
          <button id="btn-host-back" class="mode-button back-btn">
            <div class="mode-icon">←</div>
            <div class="mode-name">BACK</div>
            <div class="mode-desc">Return to menu</div>
          </button>
        </div>
      </div>
    </div>

    <!-- Join Screen -->
    <div id="join-screen" class="screen" style="display: none;">
      <div id="title-section" class="terminal-section title">
        🔗 Join Game 🔗
      </div>
      
      <div class="terminal-section join-content">
        <div class="peer-id-section" id="join-peer-id-section">
          <label for="join-peer-id-input" class="peer-id-label">Enter Host's Game ID:</label>
          <input id="join-peer-id-input" class="peer-id-input" placeholder="Enter Game ID (e.g., abc1-2def-3456)"/>
          <div class="instruction-text">Ask the host for their Game ID to connect.</div>
        </div>
        
        <div class="connection-status">
          <div id="join-status" class="status-text">Enter Game ID to connect</div>
        </div>
        
        <div class="join-buttons">
          <button id="btn-join-connect" class="mode-button connect-btn">
            <div class="mode-icon">🔗</div>
            <div class="mode-name">CONNECT</div>
            <div class="mode-desc">Join the game</div>
          </button>
          
          <button id="btn-join-back" class="mode-button back-btn">
            <div class="mode-icon">←</div>
            <div class="mode-name">BACK</div>
            <div class="mode-desc">Return to menu</div>
          </button>
        </div>
      </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen" style="display: none;">
      <!-- Game Info Bar - Score, Status, Tick -->
      <div id="game-info" class="terminal-section game-info">
        Score: 0 - 0    Status: Loading...    Tick: 0
      </div>
      
      <!-- Game Field - ASCII field content -->
      <div id="field" class="terminal-section field">
        Loading game...
      </div>
      
      <!-- Controls Section - Input instructions -->
      <div id="controls" class="terminal-section controls">
        <span id="control-text">P1: W/S (up/down)  P2: ↑/↓ (up/down)  SPACE: Ready  ESC: Menu  Q: Quit</span>
        <button id="back-to-menu-btn" class="menu-button">← Back to Menu</button>
        <button id="mobile-mode-toggle" class="menu-button mobile-toggle">📱 Mobile Mode</button>
        <br>
        <span class="mobile-hint">Mobile: Touch and drag in thumb zones to control paddles</span>
      </div>
      
      <!-- Mobile Touch Zones -->
      <div id="left-touch-zone" class="touch-zone left-zone">
        <div class="touch-indicator">
          <span class="touch-icon">🎮</span>
          <span class="touch-label">L</span>
          <div class="touch-arrows">↕</div>
        </div>
      </div>
      <div id="right-touch-zone" class="touch-zone right-zone">
        <div class="touch-indicator">
          <span class="touch-icon">🎮</span>
          <span class="touch-label">R</span>
          <div class="touch-arrows">↕</div>
        </div>
      </div>
      
      <!-- Mobile Floating Action Buttons -->
      <button id="fab-ready" class="mobile-fab fab-ready" title="Ready / Start">
        ▶
      </button>
      <button id="fab-menu" class="mobile-fab fab-menu" title="Menu">
        ☰
      </button>
      <button id="fab-quit" class="mobile-fab fab-quit" title="Quit">
        ✕
      </button>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over-screen" class="screen" style="display: none;">
      <div id="title-section" class="terminal-section title">
        🏆 Game Over! 🏆
      </div>
      
      <div class="terminal-section game-over">
        <div id="winner-text" class="winner-text">Player 1 Wins!</div>
        <div id="final-score" class="final-score">Final Score: 11 - 7</div>
        
        <div class="game-over-buttons">
          <button id="btn-rematch" class="mode-button">
            <div class="mode-icon">🔄</div>
            <div class="mode-name">REMATCH</div>
            <div class="mode-desc">Play again with same mode</div>
          </button>
          
          <button id="btn-back-to-menu" class="mode-button">
            <div class="mode-icon">📋</div>
            <div class="mode-name">MENU</div>
            <div class="mode-desc">Choose different mode</div>
          </button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
